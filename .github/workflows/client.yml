name: Go

#TODO: extend the conditions once workflow gets tested together with other workflows
on:
  push:
    branches:
      # TODO: Run on master after we're fully migrated from Circle CI
      # - master
      - "rfc-18/**"
  pull_request:
    branches:
      # TODO: Run on all branches after we're fully migrated from Circle CI
      - "rfc-18/**"
  workflow_dispatch:

jobs:
  debug:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        node-version: [12.x]
    steps:

      - name: DEBUG
        run:  |
          echo github.head_ref: ${{ github.head_ref }}
          echo github.ref: ${{ github.ref }}
      
      - name: DEBUG 2
        if:  |
          startsWith(github.ref, 'refs/heads/releases/ropsten')
            || startsWith(github.ref, 'refs/heads/rfc-18/ropsten')
        run: echo github.ref condition TRUE

      - name: DEBUG 3
        if:  |
          startsWith(github.head_ref, 'releases/ropsten')
            || startsWith(github.head_ref, 'rfc-18/ropsten')
        run: echo github.head_ref condition TRUE