syntax = "proto3";

option go_package = "pb";
package net;

// NetworkMessage contains a marshalled payload. It also contains the Identity
// of the sender. Optionally, a Message may contain an encrypted payload for
// messages which need to be secret; in this case, the encrypted field will be 
// set.
message NetworkMessage {
  // The PublicKey of the sender.
  bytes sender = 1;

  // A flag indicating whether the payload is encrypted.
  bool encrypted = 2;

  // A marshaled Protocol Message.
  bytes payload = 3;

  // Type of the message as registered by the protocol.
  bytes type = 4;

  // Channel is the group name as well as the pubsub channel
  // Channel names are Keccak(StakingPubKey1 || ... || StakingPubKeyN) of
  // all valid group members.
  bytes channel = 5;

  // Sequence number of the message. Retransmissions have the same sequence 
  // number as the original message.
  uint64 sequenceNumber = 6;
}

message Identity {
  bytes pub_key = 1;
}
